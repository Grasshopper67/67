<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>67 Clicker</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: url(https://media1.tenor.com/m/wXfbbjRyyWcAAAAd/scp-067-67.gif) center center / cover no-repeat fixed;
        display: flex;
        margin: 0;
        padding: 0;
        height: 100vh;
        overflow: hidden;
    }

    #leftPanel {
        flex: 1;
        background: #444;
        color: black;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
    }

    #game {
        flex: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        background: transparent;
    }

    #sidebar {
        flex: 1;
        background: #444;
        color: black;
        padding: 20px;
        overflow-y: auto;
        box-sizing: border-box;
    }

    #counter, #cps {
        font-size: 1.4em; /* slightly bigger font */
        color: #ddd;      /* same color as upgrade descriptions */
        margin-bottom: 20px;
        text-align: center;
        font-family: Arial, sans-serif;
    }

    #clicker {
        width: 150px;
        cursor: pointer;
        transition: transform 0.1s;
    }

    #clicker:active {
        transform: scale(0.9);
    }

    .upgrade {
        display: block;
        margin: 10px 0;
        padding: 10px;
        width: 100%;
        font-size: 1em;
        cursor: pointer;
        text-align: left;
        border: none;
        border-radius: 5px;
        background-color: #555;
        color: white;
    }

    .upgrade-description {
        display: block;
        font-size: 0.8em;
        color: #ddd;
        margin-top: 3px;
    }

    .upgrade:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .floating67 {
        position: absolute;
        font-weight: bold;
        color: #ff0;
        animation: floatUp 1s forwards;
        font-size: 20px;
        pointer-events: none;
    }

    @keyframes floatUp {
        0% {opacity: 1; transform: translateY(0);}
        100% {opacity: 0; transform: translateY(-100px);}
    }
</style>
</head>
<body>
    <div id="leftPanel">
        <div id="counter">67’s: 0</div>
        <img src="https://i.postimg.cc/PxsJHCyY/67-img.jpg" alt="67 Kid" id="clicker">
        <div id="cps">67’s per second: 0</div>
    </div>

    <div id="game"></div>

    <div id="sidebar">
        <h3>Upgrades</h3>
        <div id="upgradesContainer"></div>
    </div>

<script>
// Default upgrades with descriptions
const defaultUpgrades = [
    {name: "Auto 67", type: "auto", baseCost: 50, perSecond: 1, bought: 0, unlocked: true, description: "Generates 1 67 per second automatically."},
    {name: "Double 67", type: "click", baseCost: 100, perClick: 2, bought: 0, unlocked: false, description: "Adds +2 67s per click."},
    {name: "Mega 67", type: "click", baseCost: 250, perClick: 5, bought: 0, unlocked: false, description: "Adds +5 67s per click."},
    {name: "Super 67", type: "auto", baseCost: 500, perSecond: 5, bought: 0, unlocked: false, description: "Generates 5 67s per second automatically."},
    {name: "Ultra 67", type: "auto", baseCost: 2000, perSecond: 20, bought: 0, unlocked: false, description: "Generates 20 67s per second automatically."},
    {name: "Hyper 67", type: "click", baseCost: 5000, perClick: 50, bought: 0, unlocked: false, description: "Adds +50 67s per click."},
    {name: "Legend 67", type: "auto", baseCost: 10000, perSecond: 100, bought: 0, unlocked: false, description: "Generates 100 67s per second automatically."}
];

// Load saved upgrades from localStorage
let savedUpgrades = JSON.parse(localStorage.getItem('upgrades')) || [];
let upgrades = defaultUpgrades.map((defaultU, i) => {
    const savedU = savedUpgrades[i] || {};
    return {...defaultU, ...savedU, description: defaultU.description};
});

let count = parseInt(localStorage.getItem('count')) || 0;
let perClick = parseInt(localStorage.getItem('perClick')) || 1;
let total67sPerSecond = parseInt(localStorage.getItem('total67sPerSecond')) || 0;

const counterEl = document.getElementById("counter");
const cpsEl = document.getElementById("cps");
const clicker = document.getElementById("clicker");
const upgradesContainer = document.getElementById("upgradesContainer");

// Render upgrades
function renderUpgrades() {
    upgradesContainer.innerHTML = '';
    upgrades.forEach((u, i) => {
        if (!u.unlocked && count >= u.baseCost / 2) u.unlocked = true;
        if (u.unlocked) {
            const btn = document.createElement("button");
            btn.className = "upgrade";
            const cost = Math.floor(u.baseCost * Math.pow(1.5, u.bought));
            btn.innerHTML = `${u.name} - Cost: ${cost} <span class="upgrade-description">${u.description}</span>`;
            btn.disabled = count < cost;
            btn.addEventListener("click", () => buyUpgrade(i));
            upgradesContainer.appendChild(btn);
        }
    });
}

// Update buttons and unlock upgrades dynamically
function updateUpgradeButtons() {
    const buttons = upgradesContainer.getElementsByClassName("upgrade");
    upgrades.forEach((u, i) => {
        if (!u.unlocked && count >= u.baseCost / 2) u.unlocked = true; // instant unlock

        const cost = Math.floor(u.baseCost * Math.pow(1.5, u.bought));

        if (buttons[i]) buttons[i].disabled = count < cost;
    });
}

// Buy upgrade
function buyUpgrade(i) {
    const u = upgrades[i];
    const cost = Math.floor(u.baseCost * Math.pow(1.5, u.bought));
    if (count >= cost) {
        count -= cost;
        u.bought++;
        if (u.type === "click") perClick += u.perClick;
        if (u.type === "auto") total67sPerSecond += u.perSecond;
        updateDisplay();
        saveGame();
        renderUpgrades();
    }
}

// Floating +67 effect
function showFloating67(amount) {
    const span = document.createElement('span');
    span.className = 'floating67';
    span.textContent = `+${amount}`;
    const rect = clicker.getBoundingClientRect();
    span.style.left = rect.left + rect.width/2 + 'px';
    span.style.top = rect.top + 'px';
    document.body.appendChild(span);
    setTimeout(() => { span.remove(); }, 1000);
}

// Click 67
clicker.addEventListener("click", () => {
    count += perClick;
    showFloating67(perClick);
    updateDisplay();
    saveGame();
});

// Update display and button states
function updateDisplay() {
    counterEl.textContent = `67’s: ${Math.floor(count)}`;
    cpsEl.textContent = `67’s per second: ${total67sPerSecond}`;
    renderUpgrades();      // ensure new upgrades appear instantly
    updateUpgradeButtons(); // buttons enable/disable in real-time
}

// Auto increment 67s
setInterval(() => {
    count += total67sPerSecond / 10;
    updateDisplay();
    saveGame();
}, 100);

function saveGame() {
    localStorage.setItem('count', count);
    localStorage.setItem('perClick', perClick);
    localStorage.setItem('total67sPerSecond', total67sPerSecond);
    localStorage.setItem('upgrades', JSON.stringify(upgrades));
}

// Initial render
renderUpgrades();
updateDisplay();
</script>
</body>
</html>
