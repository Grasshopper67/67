<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>67 Clicker</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: url(https://media1.tenor.com/m/wXfbbjRyyWcAAAAd/scp-067-67.gif) center center / cover no-repeat fixed;
        display: flex;
        margin: 0;
        padding: 0;
        height: 100vh;
        overflow: hidden;
    }
    #leftPanel {
        flex: 1;
        background: #444;
        color: black;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
    }
    #game {
        flex: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        background: transparent;
    }
    #sidebar {
        flex: 1;
        background: #444;
        color: black;
        padding: 20px;
        overflow-y: auto;
        box-sizing: border-box;
    }
    #counter, #cps {
        font-size: 1.4em;
        color: #ddd;
        margin-bottom: 20px;
        text-align: center;
        font-family: Arial, sans-serif;
    }
    #clicker {
        width: 150px;
        cursor: pointer;
        transition: transform 0.1s;
    }
    #clicker:active {
        transform: scale(0.9);
    }
    .upgrade {
        display: block;
        margin: 10px 0;
        padding: 10px;
        width: 100%;
        font-size: 1em;
        cursor: pointer;
        text-align: left;
        border: none;
        border-radius: 5px;
        background-color: #555;
        color: white;
    }
    .upgrade-description {
        display: block;
        font-size: 0.8em;
        color: #ddd;
        margin-top: 3px;
    }
    .upgrade:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    .floating67 {
        position: absolute;
        font-weight: bold;
        color: #ff0;
        animation: floatUp 1s forwards;
        font-size: 20px;
        pointer-events: none;
    }
    @keyframes floatUp {
        0% {opacity: 1; transform: translateY(0);}
        100% {opacity: 0; transform: translateY(-100px);}
    }
</style>
</head>
<body>
<div id="leftPanel">
    <div id="counter">67s: 0</div>
    <img src="https://i.postimg.cc/PxsJHCyY/67-img.jpg" alt="67 Kid" id="clicker">
    <div id="cps">67s per second: 0</div>
</div>

<div id="game"></div>

<div id="sidebar">
    <h3>Upgrades</h3>
    <div id="upgradesContainer"></div>
</div>

<audio id="bg-music" loop>
    <source src="67-funk.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

<script>
// ===== GAME CODE =====
const defaultUpgrades = [
    {name: "Auto 67", type: "auto", baseCost: 50, perSecond: 1, bought: 0, unlocked: true},
    {name: "Double 67", type: "click", baseCost: 100, perClick: 2, bought: 0, unlocked: false},
    {name: "Mega 67", type: "click", baseCost: 250, perClick: 5, bought: 0, unlocked: false},
    {name: "Super 67", type: "auto", baseCost: 500, perSecond: 10, bought: 0, unlocked: false},
    {name: "Ultra 67", type: "auto", baseCost: 2000, perSecond: 50, bought: 0, unlocked: false},
    {name: "Hyper 67", type: "click", baseCost: 5000, perClick: 50, bought: 0, unlocked: false},
    {name: "Legend 67", type: "auto", baseCost: 10000, perSecond: 200, bought: 0, unlocked: false},
    {name: "Titan 67", type: "click", baseCost: 25000, perClick: 500, bought: 0, unlocked: false},
    {name: "Omega 67", type: "auto", baseCost: 50000, perSecond: 1000, bought: 0, unlocked: false},
    {name: "Infinity 67", type: "click", baseCost: 100000, perClick: 2000, bought: 0, unlocked: false},
    {name: "Eternal 67", type: "auto", baseCost: 250000, perSecond: 5000, bought: 0, unlocked: false},
    {name: "Mythic 67", type: "click", baseCost: 500000, perClick: 10000, bought: 0, unlocked: false}
];

let savedUpgrades = JSON.parse(localStorage.getItem('upgrades')) || [];
let upgrades = defaultUpgrades.map((defaultU, i) => {
    const savedU = savedUpgrades[i] || {};
    return {...defaultU, ...savedU};
});

let count = parseInt(localStorage.getItem('count')) || 0;
let perClick = parseInt(localStorage.getItem('perClick')) || 1;
let total67sPerSecond = parseInt(localStorage.getItem('total67sPerSecond')) || 0;

const counterEl = document.getElementById("counter");
const cpsEl = document.getElementById("cps");
const clicker = document.getElementById("clicker");
const upgradesContainer = document.getElementById("upgradesContainer");

// ===== UPGRADES =====
function renderUpgrades() {
    upgradesContainer.innerHTML = '';
    upgrades.forEach((u, i) => {
        if (!u.unlocked && count >= u.baseCost / 2) u.unlocked = true;
        if (u.unlocked) {
            const btn = document.createElement("button");
            btn.className = "upgrade";
            const cost = Math.floor(u.baseCost * Math.pow(1.5, u.bought));
            const effect = u.type === "click" ? `+${u.perClick} per click` : `+${u.perSecond} per second`;
            btn.innerHTML = `${u.name} - Cost: ${cost} <span class="upgrade-description">${effect}</span>`;
            btn.disabled = count < cost;
            btn.addEventListener("click", () => buyUpgrade(i, btn));
            upgradesContainer.appendChild(btn);
        }
    });
}

function buyUpgrade(i, btn) {
    const u = upgrades[i];
    const cost = Math.floor(u.baseCost * Math.pow(1.5, u.bought));
    if (count >= cost) {
        count -= cost;
        u.bought++;
        if (u.type === "click") perClick += u.perClick;
        if (u.type === "auto") total67sPerSecond += u.perSecond;
        // Update button text and disabled state instantly
        const newCost = Math.floor(u.baseCost * Math.pow(1.5, u.bought));
        const effect = u.type === "click" ? `+${u.perClick} per click` : `+${u.perSecond} per second`;
        btn.innerHTML = `${u.name} - Cost: ${newCost} <span class="upgrade-description">${effect}</span>`;
        btn.disabled = count < newCost;
        updateDisplay(false);
        saveGame();
    }
}

// ===== FLOATING 67 =====
function showFloating67(amount) {
    const span = document.createElement('span');
    span.className = 'floating67';
    span.textContent = `+${amount}`;
    const rect = clicker.getBoundingClientRect();
    span.style.left = rect.left + rect.width/2 + 'px';
    span.style.top = rect.top + 'px';
    document.body.appendChild(span);
    setTimeout(() => { span.remove(); }, 1000);
}

clicker.addEventListener("click", () => {
    count += perClick;
    showFloating67(perClick);
    updateDisplay(false);
    saveGame();
});

// ===== DISPLAY =====
function updateDisplay(renderButtons = true) {
    counterEl.textContent = `67s: ${Math.floor(count)}`;
    cpsEl.textContent = `67s per second: ${total67sPerSecond}`;
    if (renderButtons) {
        renderUpgrades();
    } else {
        const buttons = upgradesContainer.getElementsByClassName("upgrade");
        upgrades.forEach((u, i) => {
            if (!u.unlocked && count >= u.baseCost / 2) u.unlocked = true;
            const cost = Math.floor(u.baseCost * Math.pow(1.5, u.bought));
            if (buttons[i]) {
                buttons[i].disabled = count < cost;
                const effect = u.type === "click" ? `+${u.perClick} per click` : `+${u.perSecond} per second`;
                buttons[i].innerHTML = `${u.name} - Cost: ${cost} <span class="upgrade-description">${effect}</span>`;
            }
        });
    }
}

// Passive gains
setInterval(() => {
    count += total67sPerSecond / 10;
    updateDisplay(false);
    saveGame();
}, 100);

// ===== SAVE =====
function saveGame() {
    localStorage.setItem('count', count);
    localStorage.setItem('perClick', perClick);
    localStorage.setItem('total67sPerSecond', total67sPerSecond);
    localStorage.setItem('upgrades', JSON.stringify(upgrades));
}

// ===== MUSIC =====
const music = document.getElementById('bg-music');
music.volume = 0.3;
document.addEventListener('click', () => { if (music.paused) music.play().catch(() => {}); });
music.play().catch(() => { console.log("Autoplay blocked. Click anywhere to play music."); });

renderUpgrades();
updateDisplay();
</script>
</body>
</html>

